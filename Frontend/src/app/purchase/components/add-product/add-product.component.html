
<div class="container" fxFlex="80%" fxFlex.lt-md="100%">
  <mat-card>
  <div class="showVehicleTemplate" *ngIf="showVehicleTemplate">
    <mat-toolbar color="primary">
      VEHICLE DETAILS
    </mat-toolbar>

  <form [formGroup]="vehicleDetails" (ngSubmit)="saveVehicle()">

  <mat-radio-group aria-label="Selet Vehicle" required formControlName="condition" class="vehicletype" (change)="getChassisNo()">
    <mat-radio-button color="primary" value="old">OLD</mat-radio-button>
    <mat-radio-button color="primary" value="new">NEW</mat-radio-button>
  </mat-radio-group>

  <div class="vehicleDetailContainer" fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">

    <div class="firstColumn" fxFlex="50%">
      <mat-form-field appearance="outline" >
        <mat-label>Brand</mat-label>
        <input matInput type="text" required formControlName="model">
        <mat-error>Please Enter Model Name</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" >
        <mat-label>Engine No</mat-label>
        <input matInput type="text" required formControlName="engine_no">
        <mat-error>Please Enter Engine No</mat-error>
      </mat-form-field>

        <mat-form-field appearance="outline" >
          <mat-label>{{oldCar?"Vehicle Reg No":"Chassis Number"}}</mat-label>
          <input matInput type="text" required formControlName="vehicle_no">
          <mat-error>Please Enter Vehicle Reg. No.</mat-error>
        </mat-form-field>


    </div>

    <div class="secoundColumn" fxFlex="50%">
      <mat-form-field appearance="outline" >
        <mat-label>Car Name</mat-label>
        <input matInput type="text" required formControlName="car_name">
        <mat-error>Please Enter Car Name</mat-error>
      </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Color</mat-label>
          <input matInput type="text" required formControlName="color">
          <mat-error>Please Enter Color</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Fuel Type</mat-label>
          <input matInput type="text" required formControlName="fuel_type">
          <mat-error>Please Enter Fuel Type</mat-error>
        </mat-form-field>
    </div>

      </div>

<div class="carDocuments">
<mat-toolbar color="primary">VEHICLE DOCUMENTS</mat-toolbar>
</div>
<div  fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">

  <div fxFlex="50%" >
    <mat-form-field appearance="outline">
      <mat-toolbar>
        <input matInput [value]="'Registration Certificate'" readonly>
      </mat-toolbar>
      <div *ngIf="documents.registration"><img [src]="documents.registration"></div>
      <input type="file" accept="image/*" (change)="upload($event,'rc')" required >
      <mat-error>Upload Registration Certificate</mat-error>
    </mat-form-field>
  </div>

  <div fxFlex="50%">
    <mat-form-field appearance="outline">
      <mat-toolbar>
        <input matInput [value]="'Purchase Agreement'" readonly>
      </mat-toolbar>
      <div *ngIf="documents.purchaseAgrement"><img [src]="documents.purchaseAgrement"></div>
      <input type="file" accept="image/*" (change)="upload($event,'purchaseAgre')" required  >
      <mat-error>Upload Purchase Agreement</mat-error>
    </mat-form-field>
  </div>
</div>

<div class="purchasedetails" >
  <mat-toolbar color="primary">PURCHASE DETAILS</mat-toolbar>
  <div class="purchaseAmt" fxLayout="row" fxLayoutGap.gt-sm="20px" fxLayout.lt-md="column" fxLayoutAlign="space-between">
    <mat-form-field appearance="outline" >
      <mat-label>Total Car Amount</mat-label>
      <input matInput type="number" required formControlName="totalAmount" #total (keyup)="calculateBalanced(total.value,paid.value)">
      <mat-error>Enter Total Car Amount</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" >
      <mat-label>Paid Amount</mat-label>
      <input matInput type="number" formControlName="paidAmount" #paid (keyup)="calculateBalanced(total.value,paid.value)">
    </mat-form-field>

    <mat-form-field appearance="outline" >
      <mat-label>Balanced Amount</mat-label>
      <input matInput type="number" formControlName="balanceAmount" [(ngModel)]="balancedAmt" readonly>
    </mat-form-field>
  </div>
</div>

<div fxLayout="row" fxLayoutAlign="center">
<button mat-flat-button color="primary" type="submit" [disabled]="!vehicleDetails.valid">Next</button>
</div>
</form>

</div>
<div class="showSellerTemplate" *ngIf="!showVehicleTemplate">
<div class="sellerDocuments">
  <mat-toolbar color="primary">SELLER DETAILS</mat-toolbar>
  </div>
  <form   [formGroup]="sellerDetails" (ngSubmit)="onAddPurchase()" >
      <div fxLayoutGap.gt-sm="20px" fxLayout="row" fxLayout.lt-sm="column">
          <div class="firstColumn">
          <mat-form-field appearance="outline" >
            <mat-label>Full Name</mat-label>
            <input matInput type="text" required formControlName="seller_name">
            <mat-error>Please Enter Full Name</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" >
            <mat-label>Phone No</mat-label>
            <input matInput type="number" required formControlName="phone_no">
            <mat-error>Please Enter Phone No</mat-error>
          </mat-form-field>

            <mat-form-field appearance="outline" >
              <mat-label>Email</mat-label>
              <input matInput type="text" required formControlName="email">
              <mat-error>Please Enter Email</mat-error>
            </mat-form-field>


        </div>

        <div class="secoundColumn">
          <mat-form-field appearance="outline" >
            <mat-label>Full Address</mat-label>
            <input matInput type="text" required formControlName="address">
            <mat-error>Please Enter Address</mat-error>
          </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Postal Code</mat-label>
              <input matInput type="number" required formControlName="postal_code">
              <mat-error>Please Enter Color</mat-error>
            </mat-form-field>

            <mat-form-field  appearance="outline">
              <mat-label>Choose a date</mat-label>
              <input matInput type="date" formControlName="purchase_date" required>
              <mat-error>Enter Date</mat-error>
            </mat-form-field>
        </div>
      </div>
      <div class="sellerDocuments">
        <mat-toolbar color="primary">SELLER DOCUMENTS</mat-toolbar>
        </div>
        <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">

          <div fxFlex="50%" >
              <mat-form-field appearance="outline">
                <mat-toolbar>
                  <input matInput [value]="'Identity Proof'" readonly>
                </mat-toolbar>
                <div *ngIf="documents.identityProof"><img [src]="documents.identityProof"></div>
                <input type="file" accept="image/*" (change)="upload($event,'identity')" required >
              </mat-form-field>
          </div>

          <div fxFlex="50%">
            <mat-form-field appearance="outline">
              <mat-toolbar>
                <input matInput [value]="'Address Proof'" readonly>
              </mat-toolbar>
              <div *ngIf="documents.addressProof"><img [src]="documents.addressProof"></div>
              <input type="file" accept="image/*" (change)="upload($event,'address')" required >
            </mat-form-field>
          </div>

        </div>

        <div class="action" fxLayoutAlign="center">
          <button mat-raised-button color="primary" type="submit" [disabled]="sellerDetails.invalid">Add</button>
          <button mat-flat-button color="warn" (click)="onCancel()">Cancel</button>
        </div>
    </form>
    <div>
      </div>
      </div>
    </mat-card>
</div>
