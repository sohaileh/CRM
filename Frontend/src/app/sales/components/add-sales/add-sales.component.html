<div class="container">
  <div fxLayout="row wrap" fxLayoutAlign="center center">
    <div class="flex-container">
      <mat-card class="mat-elevation-z8">
        <mat-card-title class="form-title">Add Sale</mat-card-title>

        <mat-horizontal-stepper labelPosition="bottom" linear>

          <mat-step label="Vehicle no" [completed]="vehicleExists">
            <div fxLayout="column wrap">
              <mat-card-subtitle class="form-title">Please enter vehice no </mat-card-subtitle>
            </div>

            <form [formGroup]="vehicleNo">
              <div fxLayout="row" fxLayoutGap="10px" fxLayout.xs="column">
                <mat-form-field class="full-width" appearance="outline">
                  <mat-label>vehicle/registration no</mat-label>
                  <input matInput  type="text" required formControlName="vehicleNo" (keyup)="findVehicle($event)"/>
                  <mat-error >vehicle no required</mat-error>
                </mat-form-field>
              </div>

              <div class="form-button" fxLayoutGap="10px">
                <button mat-button color="accent" type="reset">reset</button>
              </div>

              <div *ngIf="vehicleExists">
                <div fxLayout="column wrap">
                  <mat-card-subtitle class="form-title">Vehicle details for "{{vehicleNo.get('vehicleNo')?.value |uppercase}}"</mat-card-subtitle>
                </div>
                <table >
                  <thead >
                    <th>Purchase id </th>
                    <th>Owner name </th>
                    <th>Car details</th>
                    <th>Condition</th>
                    <th>Purchase amount </th>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td>Suhail</td>
                      <td>Suzuki Alto 800</td>
                      <td>old</td>
                      <td>100000</td>
                    </tr>
                  </tbody>
                </table>
                <div class="form-button" fxLayoutGap="10px">
                  <button mat-raised-button color="primary" matStepperNext type="button">
                    Next
                  </button>
                </div>
              </div>
            </form>
          </mat-step>

          <mat-step label="buyer details" [stepControl]="saleForm">
            <div fxLayout="column wrap">
              <mat-card-subtitle class="form-title">please enter the buyer details</mat-card-subtitle>
            </div>
            <form [formGroup]="saleForm">
              <div fxLayout="row" fxLayoutGap="10px" fxLayout.xs="column">
                <mat-form-field class="full-width" appearance="outline">
                  <mat-label>Full Name</mat-label>
                  <input matInput type="text" required formControlName="fullName"/>
                  <mat-error >please enter full name</mat-error>
                </mat-form-field>

                <mat-form-field class="full-width" appearance="outline">
                  <mat-label>Email</mat-label>
                  <input matInput type="email" formControlName="email"/>
                  <mat-error >please enter email</mat-error>
                </mat-form-field>
              </div>

              <div fxLayout="row" fxLayoutGap="10px" fxLayout.xs="column">
                <mat-form-field class="full-width" appearance="outline">
                  <mat-label>Phone no</mat-label>
                  <input matInput type="number" required formControlName="phone_no"/>
                  <mat-error >please enter phone number</mat-error>
                </mat-form-field>

                <mat-form-field class="full-width" appearance="outline">
                  <mat-label>Address</mat-label>
                  <input matInput type="text" required formControlName="address"/>
                  <mat-error >please enter address</mat-error>
                </mat-form-field>
              </div>

              <div fxLayout="row" fxLayoutGap="10px" fxLayout.xs="column">
                <mat-form-field class="full-width" appearance="outline">
                  <mat-label>Postal code</mat-label>
                  <input matInput type="number" required formControlName="postal_code"/>
                  <mat-error >please enter postal code</mat-error>
                </mat-form-field>

                <mat-form-field class="full-width" appearance="outline">
                  <mat-label>Sold date</mat-label>
                  <input matInput type="date" required formControlName="sold_date"/>
                  <mat-error >please select the date</mat-error>
                </mat-form-field>
              </div>

              <div fxLayout="row" fxLayoutGap="10px" fxLayout.xs="column">
                <mat-form-field class="full-width" appearance="outline">
                  <mat-label>Sold Amount</mat-label>
                  <input matInput type="number" required formControlName="sold_amount"/>
                  <mat-error >please enter sold amount</mat-error>
                </mat-form-field>

                <mat-form-field class="full-width" appearance="outline">
                  <mat-label>Balance Amount</mat-label>
                  <input matInput type="number" required formControlName="balance_amount"/>
                  <mat-error >please enter balance amount</mat-error>
                </mat-form-field>
              </div>

              <div fxLayout="row" fxLayoutGap="10px" class="full-width file-upload">
                <div >
                  <input type="file" required hidden  #buyerDocs (change)="documentChange($event)">
                  {{fileName||"No document uploaded"}}
                  <button mat-mini-fab color="primary" (click)="buyerDocs.click()" type="button">
                    <mat-icon>attach_file</mat-icon>
                  </button>
                  <mat-error *ngIf="!fileName">please upload document</mat-error>
                </div>
              </div>

              <div class="form-button" fxLayoutGap="10px" fxLayout.xs="column">
                <button mat-button color="warn" matStepperPrevious>Back</button>
                <button mat-button color="accent" type="reset">reset</button>
                <button mat-raised-button color="primary">submit</button>
              </div>

            </form>
          </mat-step>

        </mat-horizontal-stepper>

      </mat-card>
    </div>
  </div>
</div>
